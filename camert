<template>
  <v-app>
  <input type="file" accept="image/*" capture="camera" id="photoInput"/>
  <img id="photoImg" alt="照片显示区域"/>
  <div><v-file-input v-model="file" label="选择照片" @change="handleFileChange"></v-file-input><v-btn @click="fileUpload()">上传</v-btn></div>
  </v-app>
</template>
<script>
export default {
  data() {
    return {
      file: ''
    }
  },
  mounted() {
    this.camert()
  },
  methods: {
    fileUpload: function() {
      this.loading = true
      // 上傳圖片 STA
      var formData = new FormData()
      var url = 'Lesson' + '/CN-TJ/111'
      formData.append('url', url)
      formData.append('del', false)
      formData.append('file', this.file)
      this.fileName = this.filename
      var resp = uploadFile(formData)
      console.log('1' + JSON.stringify(resp))
      this.loading = false
      // 上傳圖片 EN
      // this.getFile()
    },
    camert() {
      // 获取input和img元素
      const photoInput = document.getElementById('photoInput')
      const photoImg = document.getElementById('photoImg')
      // 监听input元素的change事件
      photoInput.addEventListener('change', function(event) {
        // 获取选择的照片文件
        const file = event.target.files[0]
        // 使用FileReader对象读取文件内容
        const reader = new FileReader()
        reader.onload = function(event) {
          // 将读取到的照片内容赋值给img元素的src属性
          photoImg.src = event.target.result
        }
        reader.readAsDataURL(file)
      })
    }
  }
}
</script>
